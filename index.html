<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>神經脈衝：賽博廢土 2.0 (Neural Pulse)</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

<div class="tutorial-section">
    <h3 style="color: var(--neon-orange); margin-top: 0; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; font-weight: 900; letter-spacing: 1px;">
        🌑 神經同步連線：NEURAL PULSE
    </h3>
    <p style="font-style: italic; color: #888; font-size: 0.9rem;">
        「歡迎進入 2088 年的邊緣資料流，獵人。」
    </p>
    <p style="font-size: 0.95rem;">
        地表已淪為霓虹廢土，你的意識已被切換至這台加密終端機。本系統由 <strong>Llama</strong> (感知) 與 <strong>DeepSeek</strong> (邏輯) 兩大神經網路共同維繫。<br>
        <span class="text-neon">▶ 建議連線憑證：</span><br>
        <a href="https://openrouter.ai/keys" target="_blank" style="color: var(--neon-green); text-decoration: none; font-weight: bold; border-bottom: 1px dashed var(--border-color);">OpenRouter.ai (取得 API Key)</a> | 
        <a href="https://console.groq.com/keys" target="_blank" style="color: var(--neon-orange); text-decoration: none; font-weight: bold; border-bottom: 1px dashed var(--border-color);">Groq Cloud (取得 API Key)</a>
    </p>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
        <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px; border-left: 2px solid var(--neon-green);">
            <div style="font-size: 0.8rem; color: var(--neon-green); margin-bottom: 5px; font-weight: bold;">[ 環境偵測 ]</div>
            <div style="font-size: 0.85rem; color: #ccc;">輸入「觀察四周」了解所在的地點。</div>
        </div>
        <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px; border-left: 2px solid var(--neon-orange);">
            <div style="font-size: 0.8rem; color: var(--neon-orange); margin-bottom: 5px; font-weight: bold;">[ 能源管理 ]</div>
            <div style="font-size: 0.85rem; color: #ccc;">留意⚡ En (能量) 消耗，歸零即斷線。</div>
        </div>
    </div>
</div>

<div id="mud-app-root">
    <div class="mud-container">
        <!-- 標題欄 -->
        <div class="mud-header">
            <div class="mud-title-main">NEURAL PULSE</div>
            <div class="mud-title-sub">CYBER WASTELAND SYSTEM v2.5.0</div>
        </div>

        <!-- 狀態欄 -->
        <div class="mud-status-bar" id="mudStatusBar">
            <div class="mud-status-item">
                <span style="color: var(--neon-red);">❤️ HP</span>
                <div class="mud-val-container">
                    <div id="hpBar" class="mud-progress progress-hp" style="width: 100%;"></div>
                </div>
                <span id="hpVal" class="mud-val">100</span>
            </div>
            <div class="mud-status-item">
                <span style="color: var(--neon-blue);">⚡ EN</span>
                <div class="mud-val-container">
                    <div id="enBar" class="mud-progress progress-en" style="width: 100%;"></div>
                </div>
                <span id="enVal" class="mud-val">100</span>
            </div>
            <div class="mud-status-item">
                <span class="location-tag" id="locVal">初始化中...</span>
            </div>
        </div>

        <!-- 設定欄 -->
        <div class="mud-settings">
            <div class="mud-row">
                <input type="password" id="apiKey" placeholder="AUTH_KEY (OpenRouter/Groq)" onchange="saveConfig()">
                <select id="modelSelect" onchange="saveConfig()">
                    <option value="auto">動態神經元 (Auto)</option>
                    <option value="force-deepseek">邏輯強化模式 (DeepSeek)</option>
                </select>
                <button class="mud-btn mud-btn-save" onclick="saveGame()">💾 存檔</button>
                <button class="mud-btn mud-btn-load" onclick="document.getElementById('fileInput').click()">📂 讀取</button>
                <button class="mud-btn mud-btn-clear" onclick="clearHistory()">💀 重啟</button>
                <input type="file" id="fileInput" style="display:none" onchange="loadGame(event)">
            </div>
        </div>

        <!-- 主聊天區 -->
        <div class="mud-chat-box" id="mudChatBox">
            <div class="mud-loading" id="mudLoading">Establishing link to neural core...</div>
        </div>

        <!-- 側邊資訊面板 -->
        <div class="mud-side-panel" id="mudSidePanel">
            <div>
                <div class="panel-title">System Logs</div>
                <div id="systemLogs">
                    <div class="log-entry">[00:00:00] Booting kernel...</div>
                    <div class="log-entry">[00:00:01] Loading asset_bank...</div>
                    <div class="log-entry">[00:00:02] Injecting narrative...</div>
                </div>
            </div>
            <div style="margin-top: auto;">
                <div class="panel-title">Inventory</div>
                <div id="inventoryList" style="font-size: 0.85rem; color: #aaa; font-family: var(--font-mono);">
                    初始化中...
                </div>
            </div>
        </div>

        <!-- 輸入區 -->
        <div class="mud-input-area">
            <input type="text" id="userInput" placeholder="輸入指令 (e.g. 觀察四周 / 向前走)..." onkeypress="handleKeyPress(event)">
            <button id="sendBtn" onclick="sendMessage()">EXECUTE</button>
        </div>
    </div>
</div>

<script src="game.js"></script>

</body>
</html>
